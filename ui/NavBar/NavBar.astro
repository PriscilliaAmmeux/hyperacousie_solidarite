---
// Navigation component for Hyperacousie Solidarité
import Button from '../Button/Button.astro';
import { getNavigationItems, isCurrentPage } from '../../src/utils/helpers.ts';
import '../../src/styles/variables.css';
import './NavBar.css';

const { currentPath = '' } = Astro.props;
const navItems = getNavigationItems();
---

<div class="navbar-container">
  <nav class="navbar" role="navigation" aria-label="Navigation principale">
    <section class="navbar-logo">
      <a href="/" class="logo-link" aria-label="Retour à l'accueil - Hyperacousie Solidarité">
        <img 
          src="/logo.webp" 
          alt="Logo Hyperacousie Solidarité"
          class="logo"
        />
      </a>
    </section>
    
    <section class="navbar-nav">
      <div class="nav-links" role="list">
        {navItems.map((item) => (
          <a 
            href={item.href}
            class={`nav-link ${
              isCurrentPage(item.href, currentPath)
                ? 'nav-link-active'
                : 'nav-link-default'
            }`}
            role="listitem"
            aria-current={isCurrentPage(item.href, currentPath) ? 'page' : undefined}
            tabindex="0"
          >
            {item.label}
          </a>
        ))}
      </div>
    </section>

    <!-- CTA Button on the right -->
    <section class="navbar-cta">
      <Button 
        variant="teal" 
        size="sm"
        href="https://www.helloasso.com/associations/hyperacousie-solidarite"
        aria-label="Adhérer à l'association ou faire un don via HelloAsso"
      >
        Adhérer / Faire un don
      </Button>
    </section>
  </nav>
</div>

<style>
  .nav-link {
    color: var(--nav-text-color);
    text-decoration: none;
    position: relative;
    padding-bottom: 0.25rem;
    border-radius: 2px;
    outline: none;
  }
  
  .nav-link-default:hover,
  .nav-link-default:focus {
    color: var(--nav-text-hover);
    border-bottom: 2px solid var(--nav-text-hover);
  }
  
  .nav-link-active {
    color: var(--nav-text-active);
    border-bottom: 2px solid var(--nav-text-active);
  }
  
  .nav-link-active:focus {
    outline: none;
  }
  
  /* Accessibility contrast improvements */
  @media (prefers-reduced-motion: reduce) {
    .nav-link {
      transition: none;
    }
  }
  
  /* Dark mode support */
  @media (prefers-color-scheme: dark) {
    .nav-link {
      color: var(--nav-text-color);
    }
  }
</style>


